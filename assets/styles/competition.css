/* =========================================
   SEÇÃO COMPETIÇÃO (OTIMIZADO - LEVE)
   ========================================= */

:root {
    --header-height: 90px; 
}

.section-competicao {
    /* TRAVA DE ALTURA: Ocupa exatamente 100% da tela */
    height: 100vh;
    min-height: 600px;
    
    padding-top: var(--header-height);
    padding-bottom: 1.5rem;
    
    display: flex;
    flex-direction: column;
    align-items: center;
    
    background-color: var(--black-collor);
    overflow: hidden; /* Impede rolagem na página principal */
    z-index: 2;
    position: relative;
}

/* --- TÍTULO --- */
.titulo-competicao {
    margin-top: 0.5rem;
    margin-bottom: 1rem;
    
    color: var(--white-collor);
    font-family: "Conthrax", sans-serif;
    font-weight: 700;
    font-size: clamp(1.5rem, 3.5rem, 4.5rem); 
    text-transform: uppercase;
    letter-spacing: 4px;
    text-align: center;
    text-shadow: 0 0 15px rgba(55, 211, 102, 0.6);
    flex-shrink: 0; 
}

.titulo-competicao::after {
    content: '';
    display: block;
    width: 80px;
    height: 3px;
    background-color: var(--primary-collor);
    margin: 5px auto 0 auto;
    border-radius: 2px;
    box-shadow: 0 0 10px var(--primary-collor);
}

/* --- GRID PRINCIPAL (LAYOUT TETRIS) --- */
.competicao-dashboard {
    flex: 1; 
    width: 100%;
    max-width: 1600px; 
    padding: 0 2rem;
    
    display: grid;
    
    /* COLUNAS: Menu | Flex | Flex | Galeria Larga */
    grid-template-columns: 260px 1.2fr 0.8fr 380px; 
    
    /* LINHAS INDEPENDENTES */
    grid-template-rows: 45% 52%; 
    
    gap: 1.2rem;
    min-height: 0; 
}

/* =========================================
   ESTILO GERAL DOS CARDS (OTIMIZADO)
   ========================================= */
.dashboard-item {
    /* PERFORMANCE: Fundo mais sólido para evitar recálculo constante de pixels */
    background-color: rgba(13, 13, 13, 0.95);
    
    /* PERFORMANCE: Blur removido para evitar travamentos */
    /* backdrop-filter: blur(10px); */
    
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    padding: 1.2rem;
    
    display: flex;
    flex-direction: column;
    gap: 0.8rem;
    
    /* Ocupa 100% da célula do grid */
    height: 100%; 
    
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
}

.dashboard-item:hover {
    border-color: rgba(54, 211, 102, 0.5);
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
}

.dash-title {
    font-family: "Conthrax", sans-serif;
    font-size: 0.9rem;
    color: var(--primary-collor);
    margin: 0;
    display: flex;
    align-items: center;
    gap: 0.6rem;
    text-transform: uppercase;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding-bottom: 0.5rem;
    flex-shrink: 0;
}


/* =========================================
   POSICIONAMENTO (GRID AREAS)
   ========================================= */

/* 1. TEXTO: Linha 1 | Colunas 1 e 2 */
.item-texto {
    grid-column: 1 / 3; 
    grid-row: 1 / 2;
}

/* 2. MAPA: Linha 1 | Coluna 3 */
.item-mapa {
    grid-column: 3 / 4;
    grid-row: 1 / 2;
    padding: 0; 
    overflow: hidden;
    position: relative;
    border: 1px solid rgba(54, 211, 102, 0.3);
}

/* 3. MENU: Linha 2 | Coluna 1 */
.item-menu {
    grid-column: 1 / 2;
    grid-row: 2 / 3;
}

/* 4. DETALHES: Linha 2 | Colunas 2 e 3 */
.item-detalhes {
    grid-column: 2 / 4; 
    grid-row: 2 / 3;
}

/* 5. GALERIA: Linhas 1 e 2 | Coluna 4 */
.item-galeria {
    grid-column: 4 / 5;
    grid-row: 1 / 3; 
    padding-bottom: 0; 
    overflow: hidden; 
}


/* =========================================
   ESTILOS INTERNOS
   ========================================= */

/* --- TEXTO --- */
.item-texto p {
    font-family: 'Poppins', sans-serif;
    font-size: 0.9rem;
    color: #ccc;
    line-height: 1.6;
    text-align: justify;
    margin: 0;
    overflow-y: auto; 
    padding-right: 5px;
    flex: 1;
}

.btn-saiba-competicao {
    align-self: flex-start;
    background: transparent;
    border: 1px solid var(--primary-collor);
    color: var(--white-collor);
    padding: 0.5rem 1rem;
    border-radius: 4px;
    font-family: "Conthrax", sans-serif;
    font-size: 0.7rem;
    text-decoration: none;
    transition: all 0.3s ease;
    margin-top: auto; 
    white-space: nowrap;
}
.btn-saiba-competicao:hover {
    background: var(--primary-collor);
    color: var(--black-collor);
    font-weight: 700;
}

/* --- MENU --- */
.menu-botoes {
    display: flex;
    flex-direction: column;
    gap: 8px;
    overflow-y: auto; 
    flex: 1;
    padding-right: 5px;
}

.prova-btn {
    display: flex;
    align-items: center;
    gap: 10px;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1);
    color: #aaa;
    padding: 0.8rem;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: left;
}
.prova-btn:hover, .prova-btn.active {
    background: rgba(54, 211, 102, 0.1);
    border-color: var(--primary-collor);
}
.prova-btn.active strong, .prova-btn.active i {
    color: var(--primary-collor);
    text-shadow: 0 0 5px rgba(54, 211, 102, 0.4);
}
.prova-btn strong { font-family: "Conthrax", sans-serif; font-size: 0.8rem; color: #fff; display: block; }
.prova-btn span { font-size: 0.65rem; font-family: 'Poppins', sans-serif; }

/* --- MAPA (COLORIDO) --- */
.map-header {
    position: absolute; top: 10px; left: 10px; z-index: 10;
    background: rgba(0,0,0,0.8); padding: 4px 8px; border-radius: 4px;
    display: flex; align-items: center; gap: 8px;
    border: 1px solid rgba(255,255,255,0.1);
}
.map-header h5 { font-family: "Conthrax", sans-serif; font-size: 0.65rem; color: #fff; margin: 0; }
.blinking-dot { width: 6px; height: 6px; background: #ff3b3b; border-radius: 50%; animation: blink 1.5s infinite; }
@keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }

.map-container { width: 100%; height: 100%; position: relative; }

.map-container iframe {
    filter: brightness(0.9) contrast(1.1);
    width: 100%; height: 100%; opacity: 1; transition: all 0.5s ease;
}

.map-container:hover iframe {
    filter: brightness(1) contrast(1);
}
.map-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; box-shadow: inset 0 0 30px rgba(0,0,0,0.8); }

/* --- DETALHES --- */
.tab-content {
    display: none;
    flex-direction: column;
    gap: 1rem;
    height: 100%;
    overflow-y: auto; 
    padding-right: 5px;
}
.tab-content.active { display: flex; animation: fadeIn 0.4s ease; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

.detail-list li {
    font-family: 'Poppins', sans-serif; font-size: 0.95rem; color: #ccc;
    border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 5px; margin-bottom: 10px;
}
.detail-list strong { color: var(--primary-collor); }

.enduro-stats { display: flex; gap: 15px; margin-bottom: 10px; }
.stat-box { 
    background: rgba(255,255,255,0.05); padding: 12px; 
    border: 1px solid var(--primary-collor); flex: 1; 
    text-align: center; border-radius: 4px; 
}
.stat-box span { font-size: 0.7rem; color: #888; display: block; }
.stat-box strong { font-size: 1.2rem; color: #fff; font-family: "Conthrax", sans-serif; }


/* =========================================
   GALERIA INFINITA (OTIMIZADA)
   ========================================= */

.gallery-mask {
    flex: 1;
    overflow: hidden;
    position: relative;
    mask-image: linear-gradient(to bottom, transparent, black 5%, black 95%, transparent);
    -webkit-mask-image: linear-gradient(to bottom, transparent, black 5%, black 95%, transparent);
}

.gallery-track {
    display: flex;
    flex-direction: column;
    gap: 12px; 
    animation: scrollVertical 30s linear infinite;
    
    /* PERFORMANCE: Avisa o navegador que vai mover e força aceleração de hardware */
    will-change: transform;
    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;
}

.gallery-track:hover {
    animation-play-state: paused;
}

.gallery-group {
    display: grid;
    grid-template-columns: 1fr 1fr; /* Duas colunas */
    gap: 12px;
}

.gallery-group img {
    width: 100%;
    height: 160px; 
    object-fit: cover;
    
    border-radius: 6px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    
    /* REMOVIDO FILTROS PESADOS PARA PERFORMANCE */
    transition: transform 0.3s ease; /* Anima apenas o transform */
    cursor: pointer;
}

/* Correção para última imagem ímpar ocupar 2 colunas */
.gallery-group img:last-child:nth-child(odd) {
    grid-column: span 2;
    object-position: center 20%;
}

.gallery-group img:hover {
    border-color: var(--primary-collor);
    transform: scale(1.05);
    /* Removido box-shadow pesado no hover para evitar engasgos */
    z-index: 2;
}

@keyframes scrollVertical {
    0% { transform: translateY(0); }
    100% { transform: translateY(-50%); } 
}


/* --- HIGHLIGHTS E SCROLLBARS --- */
.tech-highlight {
    color: var(--primary-collor); font-weight: 600; cursor: default;
    border-bottom: 1px dotted rgba(54, 211, 102, 0.3); transition: all 0.3s;
}
.tech-highlight:hover { text-shadow: 0 0 10px var(--primary-collor); color: #fff; background: rgba(54, 211, 102, 0.2); }

.item-texto p::-webkit-scrollbar, .menu-botoes::-webkit-scrollbar, .tab-content::-webkit-scrollbar { width: 4px; }
.item-texto p::-webkit-scrollbar-track, .menu-botoes::-webkit-scrollbar-track, .tab-content::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.05); }
.item-texto p::-webkit-scrollbar-thumb, .menu-botoes::-webkit-scrollbar-thumb, .tab-content::-webkit-scrollbar-thumb { background: var(--primary-collor); border-radius: 2px; }


/* =========================================
   RESPONSIVIDADE (MOBILE)
   ========================================= */
@media screen and (max-width: 1150px) {
    .section-competicao {
        height: auto; 
        min-height: 100vh;
        overflow-y: visible; 
        padding-top: 6rem;
        display: block; 
    }

    .competicao-dashboard {
        display: flex; 
        flex-direction: column; 
        height: auto;
        gap: 1.5rem;
    }

    .item-texto, .item-menu, .item-mapa, .item-detalhes, .item-galeria {
        height: auto;
        grid-column: auto;
        grid-row: auto;
    }

    .item-texto    { order: 1; }
    .item-mapa     { order: 2; height: 300px; }
    .item-menu     { order: 3; }
    .item-detalhes { order: 4; }
    
    .item-galeria  { 
        order: 5; 
        height: 450px; 
    }
    
    .menu-botoes { overflow-y: visible; }
}